@model Capstone.Models.ViewModel.SearchViewModel

@{
    ViewData["Title"] = "SearchEvents";
}

<h2>Search</h2>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="~/css/SearchStyle.css" rel="stylesheet" />
</head>
<body>


    <table class="table table-hover table-responsive-sm">
        <thead>
            <tr>
                <th>

                </th>
                <th>

                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Event.Beginning)

                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Event.Ending)

                </th>
                <th>
                    Podcast
                </th>
                <th>
                    Location

                </th>
                <th class="description-copy">
                    @Html.DisplayNameFor(model => model.Event.DescriptionCopy)

                </th>
                <th>
                    Ticket

                </th>
                <th>


                </th>

                @if (Model.User.Role == 1)
                {
                    <th> IsFinal </th>
                }


                <th>
                    Event
                </th>
                <th>
                    Genre

                </th>
                <th>

                </th>
                <th>

                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (Event item in Model.EventList)
            {
                <tr>
                    <td></td>
                    <td>
                        @item.Beginning.ToString("M/d/yyyy")
                        @item.Beginning.ToString("H:mm tt")
                    </td>
                    <td>
                        @item.Ending.ToString("M/d/yyyy")
                        @item.Ending.ToString("H:mm tt")
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Podcast.Title)

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Venue.DisplayName)

                    </td>
                    <td>
                        @if (item.CoverPhoto != null)
                        {
                            <a href=@item.Podcast.URL>
                                <img src=@item.CoverPhoto )>
                            </a>
                        }

                    </td>
                    <td>
                        @if (item.DescriptionCopy.Length > 75)
                        {
                            item.DescriptionCopy = item.DescriptionCopy.Substring(0, 75) + "...";
                            @Html.DisplayFor(modelItem => item.DescriptionCopy)
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.DescriptionCopy)
                        }

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Ticket.TicketType)

                    </td>
                    <td></td>

                    <td>
                        @if (Model.User.Role == 1)
                        {
                            @Html.DisplayFor(modelItem => item.IsFinalized)
                        }

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.EventName)

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Podcast.Genre.GenreName)

                    </td>
                    <td>
                        @Html.ActionLink("iCal", "EncodeICal")
                        @Html.ActionLink("Google", "EncodeGoogleCal")
                        @Html.ActionLink("Yahoo", "EncodeYahooCal")

                    </td>
                    <td>
                        @if (Model.User.Role == 1)
                        {
                            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ })
                            <br />
                            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })
                            <br />
                            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
                            <br />
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="form-group-home">
        <a id="home-link" asp-controller="Search" asp-action="Index">Back to Search page</a>
    </div>
</body>
</html>

